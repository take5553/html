# スライムの合成をするとサイズが2倍になるときの、可能な限り合成を繰り返した時のスライムの匹数

問題：https://atcoder.jp/contests/abc323/tasks/abc323_d

解説：https://atcoder.jp/contests/abc323/editorial/7348

提出：https://atcoder.jp/contests/abc323/submissions/46357200

```c++
int main () {
    int n;
    cin >> n;

    // サイズが偶数のスライムで、2で割り続けたら奇数xに行きつくものを「タイプxのスライムとする」
    // サイズがxのスライムを「タイプxの根源スライム」とする
    // (なぜなら偶数のスライムは奇数のスライムを合成して作ることが出来るから)
    // (ただし、根源スライムの匹数が0の問題もあり、サイズが偶数のスライムは既に根源スライムから合成済みと考える)

    // タイプxのスライムを可能な限り合成し尽すと、タイプdのサイズごとに0匹か1匹かの状態になり、一意となる
    // これを2進数と見なし、その数をmp_xと呼ぶ
    // これはタイプxのスライム全体を可能な限り「分割」して全て根源スライムに戻した時の、根源スライムの匹数となる

    map<int, ll> mp;

    rep(i, n)
    {
        int x; // サイズ
        ll y; // 匹数
        cin >> x >> y;

        // 根源スライムになるまで「分割」を繰り返す
        while(x % 2 == 0)
        {
            x /= 2; // サイズは半分に
            y *= 2; // 匹数は2倍に
        }

        // 根源スライムの匹数に加える
        mp[x] += y;
    }

    ll ans = 0;
    // 連想配列のforeachは、以下のようにする
    for(auto [_, y] : mp)
    {
        while(y > 0)
        {
            ans += y % 2;
            y /= 2;
        }
        
    }

    cout << ans << endl;

}
```

